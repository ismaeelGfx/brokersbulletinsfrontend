import React, { useEffect, useState } from 'react';
import axios from 'axios';
import { Link, useNavigate } from 'react-router-dom';
import { jwtDecode } from 'jwt-decode';
// import About from '/about';
// import logo1 from '../img/logo.png'
import logo1 from "../img/PNG-03.png";
import user from '../img/user-img.png'
import { baseurl } from '../baseurl';
import LOGIN from '../Login/login';
import Singup from '../Login/singup';
import { useDispatch } from 'react-redux';
import { logout } from '../features/user_authentication';
// function Dropdown() {
//   const [showDropdown, setShowDropdown] = useState(false);
//   const toggleDropdown = () => {
//     setShowDropdown(!showDropdown);
//   };
//   const closeDropdown = (event) => {
//     if (!event.target.matches('.dropbtn')) {
//       setShowDropdown(false);
//     }
//   };
  // Attach event listener to the window to close dropdown when clicking outside
  // React.useEffect(() => {
  //   window.addEventListener('click', closeDropdown);
  //   return () => {
  //     window.removeEventListener('click', closeDropdown);
  //   };
  // }, []);
const Header2 = ({ onOpenDialog, onToggleTheme }) => {
  const [darkMode, setDarkMode] = useState(false); // State to track the current theme
  const [darkModeValue, setdarkModeValue] = useState(false); // State to track the current theme
  const toggleTheme = () => {

    // setDarkMode(!darkMode); // Toggle the theme
    const toggle = document.querySelector('.input');
    if (toggle.checked) {
      setDarkMode(true);
      const darkModeValue = true;
      onToggleTheme(darkModeValue);
    } else {
      setDarkMode(false);
      const darkModeValue = false;
      onToggleTheme(darkModeValue);
    }

    // const darkModeValue = toggle.checked;

  };
  
  const [dialogOpen, setDialogOpen] = useState(false);
  const [showDropdown, setShowDropdown] = useState(false);
  const handleOpenDialog = () => {
    setDialogOpen(true);
  };

  const handleCloseDialog = () => {
    setDialogOpen(false);
  };

    const toggleDropdown = () => {
    setShowDropdown(!showDropdown);
  };

  const closeDropdown = (event) => {
    if (!event.target.matches('.dropbtn')) {
      setShowDropdown(false);
    }
    }
  
  const [dialogOpen1, setDialogOpen1] = useState(false);
  const handleOpenDialog1 = () => {
    setDialogOpen1(true);
  };
  const handleCloseDialog1 = () => {
    setDialogOpen1(false);
  };

  const dispatch = useDispatch();
  const navigate = useNavigate();

  const handleLogout = () => {
    // Dispatch the logout action
    dispatch(logout());
    
    navigate('/')
    window.location.reload()
  };



    return (
        <div>
  <header  className={darkMode ? 'dark-theme' : 'light-theme'} >
    <div class="contanir">
      <nav class="main-header">
        <div class="header-logo">
        <Link to="/">
        <img src={logo1} alt="" />
          </Link>
   
        </div>
        
        <ul className='header-list'>
          <Link to="/about">
          <li >About us</li>
          </Link>
          <Link to="/fave">
          <li >Favorites</li>
          </Link>
          <Link to="/save">
          <li >Following</li>
          </Link>
        </ul>
        <div class="header-btn-box">
          <label class="switch" onClick={toggleTheme}>
            <span class="sun">
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
              <g clip-path="url(#clip0_62_8)">
                <path opacity="0.2" d="M21.5625 15C21.5625 16.2979 21.1776 17.5667 20.4565 18.6459C19.7354 19.7251 18.7105 20.5663 17.5114 21.063C16.3122 21.5597 14.9927 21.6896 13.7197 21.4364C12.4467 21.1832 11.2774 20.5582 10.3596 19.6404C9.44183 18.7226 8.81682 17.5533 8.5636 16.2803C8.31038 15.0073 8.44034 13.6878 8.93704 12.4886C9.43374 11.2895 10.2749 10.2646 11.3541 9.54348C12.4333 8.82238 13.7021 8.4375 15 8.4375C16.7405 8.4375 18.4097 9.1289 19.6404 10.3596C20.8711 11.5903 21.5625 13.2595 21.5625 15Z" fill="#0E87CC"/>
                <path d="M14.0625 4.6875V1.875C14.0625 1.62636 14.1613 1.3879 14.3371 1.21209C14.5129 1.03627 14.7514 0.9375 15 0.9375C15.2486 0.9375 15.4871 1.03627 15.6629 1.21209C15.8387 1.3879 15.9375 1.62636 15.9375 1.875V4.6875C15.9375 4.93614 15.8387 5.1746 15.6629 5.35041C15.4871 5.52623 15.2486 5.625 15 5.625C14.7514 5.625 14.5129 5.52623 14.3371 5.35041C14.1613 5.1746 14.0625 4.93614 14.0625 4.6875ZM22.5 15C22.5 16.4834 22.0601 17.9334 21.236 19.1668C20.4119 20.4001 19.2406 21.3614 17.8701 21.9291C16.4997 22.4968 14.9917 22.6453 13.5368 22.3559C12.082 22.0665 10.7456 21.3522 9.6967 20.3033C8.6478 19.2544 7.9335 17.918 7.64411 16.4632C7.35472 15.0083 7.50325 13.5003 8.0709 12.1299C8.63856 10.7594 9.59985 9.58809 10.8332 8.76398C12.0666 7.93987 13.5166 7.5 15 7.5C16.9885 7.50217 18.8949 8.29305 20.3009 9.6991C21.707 11.1052 22.4978 13.0115 22.5 15ZM20.625 15C20.625 13.8875 20.2951 12.7999 19.677 11.8749C19.0589 10.9499 18.1804 10.2289 17.1526 9.80318C16.1248 9.37743 14.9938 9.26604 13.9026 9.48308C12.8115 9.70012 11.8092 10.2359 11.0225 11.0225C10.2359 11.8092 9.70012 12.8115 9.48308 13.9026C9.26604 14.9938 9.37743 16.1248 9.80318 17.1526C10.2289 18.1804 10.9499 19.0589 11.8749 19.677C12.7999 20.2951 13.8875 20.625 15 20.625C16.4914 20.6234 17.9212 20.0303 18.9758 18.9758C20.0303 17.9212 20.6234 16.4914 20.625 15ZM6.83672 8.16328C7.01263 8.33919 7.25122 8.43802 7.5 8.43802C7.74878 8.43802 7.98737 8.33919 8.16328 8.16328C8.33919 7.98737 8.43802 7.74878 8.43802 7.5C8.43802 7.25122 8.33919 7.01263 8.16328 6.83672L6.28828 4.96172C6.11237 4.78581 5.87378 4.68698 5.625 4.68698C5.37622 4.68698 5.13763 4.78581 4.96172 4.96172C4.78581 5.13763 4.68698 5.37622 4.68698 5.625C4.68698 5.87378 4.78581 6.11237 4.96172 6.28828L6.83672 8.16328ZM6.83672 21.8367L4.96172 23.7117C4.78581 23.8876 4.68698 24.1262 4.68698 24.375C4.68698 24.6238 4.78581 24.8624 4.96172 25.0383C5.13763 25.2142 5.37622 25.313 5.625 25.313C5.87378 25.313 6.11237 25.2142 6.28828 25.0383L8.16328 23.1633C8.25038 23.0762 8.31948 22.9728 8.36662 22.859C8.41376 22.7452 8.43802 22.6232 8.43802 22.5C8.43802 22.3768 8.41376 22.2548 8.36662 22.141C8.31948 22.0272 8.25038 21.9238 8.16328 21.8367C8.07618 21.7496 7.97277 21.6805 7.85897 21.6334C7.74516 21.5862 7.62318 21.562 7.5 21.562C7.37682 21.562 7.25484 21.5862 7.14103 21.6334C7.02723 21.6805 6.92382 21.7496 6.83672 21.8367ZM22.5 8.4375C22.6231 8.4376 22.7451 8.41343 22.8589 8.36638C22.9727 8.31933 23.0762 8.25031 23.1633 8.16328L25.0383 6.28828C25.2142 6.11237 25.313 5.87378 25.313 5.625C25.313 5.37622 25.2142 5.13763 25.0383 4.96172C24.8624 4.78581 24.6238 4.68698 24.375 4.68698C24.1262 4.68698 23.8876 4.78581 23.7117 4.96172L21.8367 6.83672C21.7055 6.96783 21.6161 7.13495 21.5798 7.3169C21.5436 7.49885 21.5621 7.68747 21.6332 7.85887C21.7042 8.03026 21.8245 8.17673 21.9788 8.27974C22.1331 8.38274 22.3145 8.43765 22.5 8.4375ZM23.1633 21.8367C22.9874 21.6608 22.7488 21.562 22.5 21.562C22.2512 21.562 22.0126 21.6608 21.8367 21.8367C21.6608 22.0126 21.562 22.2512 21.562 22.5C21.562 22.7488 21.6608 22.9874 21.8367 23.1633L23.7117 25.0383C23.7988 25.1254 23.9022 25.1945 24.016 25.2416C24.1298 25.2888 24.2518 25.313 24.375 25.313C24.4982 25.313 24.6202 25.2888 24.734 25.2416C24.8478 25.1945 24.9512 25.1254 25.0383 25.0383C25.1254 24.9512 25.1945 24.8478 25.2416 24.734C25.2888 24.6202 25.313 24.4982 25.313 24.375C25.313 24.2518 25.2888 24.1298 25.2416 24.016C25.1945 23.9022 25.1254 23.7988 25.0383 23.7117L23.1633 21.8367ZM5.625 15C5.625 14.7514 5.52623 14.5129 5.35041 14.3371C5.1746 14.1613 4.93614 14.0625 4.6875 14.0625H1.875C1.62636 14.0625 1.3879 14.1613 1.21209 14.3371C1.03627 14.5129 0.9375 14.7514 0.9375 15C0.9375 15.2486 1.03627 15.4871 1.21209 15.6629C1.3879 15.8387 1.62636 15.9375 1.875 15.9375H4.6875C4.93614 15.9375 5.1746 15.8387 5.35041 15.6629C5.52623 15.4871 5.625 15.2486 5.625 15ZM15 24.375C14.7514 24.375 14.5129 24.4738 14.3371 24.6496C14.1613 24.8254 14.0625 25.0639 14.0625 25.3125V28.125C14.0625 28.3736 14.1613 28.6121 14.3371 28.7879C14.5129 28.9637 14.7514 29.0625 15 29.0625C15.2486 29.0625 15.4871 28.9637 15.6629 28.7879C15.8387 28.6121 15.9375 28.3736 15.9375 28.125V25.3125C15.9375 25.0639 15.8387 24.8254 15.6629 24.6496C15.4871 24.4738 15.2486 24.375 15 24.375ZM28.125 14.0625H25.3125C25.0639 14.0625 24.8254 14.1613 24.6496 14.3371C24.4738 14.5129 24.375 14.7514 24.375 15C24.375 15.2486 24.4738 15.4871 24.6496 15.6629C24.8254 15.8387 25.0639 15.9375 25.3125 15.9375H28.125C28.3736 15.9375 28.6121 15.8387 28.7879 15.6629C28.9637 15.4871 29.0625 15.2486 29.0625 15C29.0625 14.7514 28.9637 14.5129 28.7879 14.3371C28.6121 14.1613 28.3736 14.0625 28.125 14.0625Z" fill="#0E87CC"/>
              </g>
              <defs>
                <clipPath id="clip0_62_8">
                  <rect width="30" height="30" fill="white"/>
                </clipPath>
              </defs>
            </svg>
          </span>
            <span class="moon">
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
              <path opacity="0.2" d="M26.7056 17.3309C26.1402 19.1897 25.1031 20.8704 23.6953 22.2094C22.2874 23.5483 20.5568 24.4998 18.672 24.9712C16.7871 25.4426 14.8123 25.4178 12.9399 24.8993C11.0675 24.3808 9.36126 23.3862 7.98743 22.0123C6.6136 20.6385 5.61898 18.9323 5.10045 17.0599C4.58191 15.1874 4.55714 13.2126 5.02854 11.3278C5.49994 9.44296 6.45145 7.71233 7.79038 6.30447C9.12932 4.89661 10.81 3.8595 12.6689 3.29416C12.0795 5.24424 12.0302 7.31767 12.5262 9.29355C13.0222 11.2694 14.045 13.0738 15.4855 14.5143C16.926 15.9548 18.7303 16.9775 20.7062 17.4735C22.6821 17.9695 24.7555 17.9202 26.7056 17.3309Z" fill="#3B82F6"/>
              <path d="M27.3677 16.6676C27.2475 16.5471 27.0967 16.4616 26.9315 16.4203C26.7663 16.379 26.593 16.3835 26.4302 16.4332C24.6426 16.9736 22.7419 17.0189 20.9305 16.5643C19.1192 16.1097 17.4651 15.1722 16.1446 13.8516C14.8241 12.5311 13.8865 10.877 13.4319 9.0657C12.9773 7.25437 13.0226 5.35363 13.563 3.56602C13.6132 3.40313 13.618 3.22965 13.5769 3.06424C13.5359 2.89882 13.4505 2.74773 13.33 2.62722C13.2094 2.5067 13.0584 2.42132 12.8929 2.38025C12.7275 2.33919 12.554 2.34399 12.3912 2.39414C9.9197 3.15123 7.74999 4.66851 6.19076 6.73008C4.82719 8.54046 3.99544 10.6952 3.78896 12.9522C3.58249 15.2093 4.00948 17.4792 5.02195 19.5069C6.03442 21.5346 7.59226 23.2399 9.52045 24.4311C11.4486 25.6222 13.6708 26.2521 15.9372 26.25C18.5814 26.2582 21.1552 25.3986 23.2638 23.8031C25.3254 22.2439 26.8427 20.0742 27.5998 17.6027C27.6493 17.4405 27.6539 17.2678 27.6131 17.1031C27.5722 16.9384 27.4874 16.7879 27.3677 16.6676ZM22.1365 22.3055C20.1508 23.8011 17.6917 24.5291 15.2118 24.3554C12.7319 24.1818 10.3983 23.1182 8.64038 21.3605C6.88249 19.6027 5.81871 17.2691 5.64487 14.7893C5.47103 12.3094 6.19882 9.85027 7.69428 7.86446C8.66858 6.57781 9.92819 5.53483 11.374 4.81758C11.2916 5.39558 11.2501 5.97867 11.2497 6.5625C11.2532 9.79378 12.5383 12.8917 14.8232 15.1766C17.108 17.4615 20.206 18.7466 23.4373 18.75C24.0223 18.7498 24.6065 18.7083 25.1857 18.6258C24.4678 20.0718 23.424 21.3314 22.1365 22.3055Z" fill="#3B82F6"/>
            </svg>
          </span> 
            <input type="checkbox" class="input"/>
            <span class="slider"></span>
          </label>
          {/* <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="31" viewBox="0 0 28 31" fill="none">
            <path d="M13.1918 31C12.7009 30.8526 12.1824 30.7632 11.7245 30.5467C10.4804 29.9584 9.66383 28.9821 9.28652 27.6535C9.26452 27.576 9.24251 27.4985 9.21954 27.4213C9.21702 27.4127 9.20793 27.406 9.17683 27.3672C9.08289 27.3672 8.96353 27.3672 8.84426 27.3672C6.23098 27.3672 3.61777 27.3691 1.00449 27.3659C0.230147 27.3649 -0.232898 26.6594 0.120374 26.026C0.178509 25.9216 0.259296 25.8272 0.341626 25.7394C2.21889 23.7378 3.46139 21.4018 3.96763 18.7087C4.14731 17.753 4.2035 16.7688 4.24816 15.7945C4.30499 14.556 4.19936 13.3044 4.32846 12.0757C4.67596 8.76694 6.38987 6.32343 9.30357 4.71927C9.81387 4.43833 10.3709 4.24175 10.9431 3.99004C10.9431 3.64089 10.9424 3.24854 10.9433 2.8562C10.9466 1.3954 11.7703 0.371839 13.2027 0.0461771C13.2411 0.0374583 13.2765 0.0156615 13.3134 0C13.5565 0 13.7996 0 14.0427 0C14.4657 0.181479 14.9288 0.304026 15.303 0.557112C16.0242 1.04472 16.3731 1.77701 16.4074 2.64412C16.4253 3.09693 16.4106 3.55111 16.4106 4.00958C16.8128 4.17095 17.2167 4.30149 17.5922 4.48846C21.1044 6.23705 22.9563 9.065 23.0932 12.9802C23.1404 14.3306 23.0778 15.6863 23.1615 17.0337C23.3286 19.7268 24.2611 22.1615 25.8559 24.339C26.213 24.8266 26.6182 25.2808 27.0193 25.7345C27.3118 26.0654 27.4608 26.4157 27.2628 26.8378C27.0724 27.2435 26.7231 27.3709 26.2904 27.3699C23.6975 27.3641 21.1045 27.3671 18.5116 27.3671C18.4009 27.3671 18.29 27.3671 18.1564 27.3671C18.1096 27.5253 18.0722 27.679 18.0191 27.8273C17.3896 29.5861 16.1616 30.6395 14.3043 30.9498C14.2562 30.9579 14.2109 30.9828 14.1643 30.9998C13.8401 31 13.516 31 13.1918 31ZM24.4388 25.538C24.413 25.4793 24.4075 25.4594 24.3965 25.4432C24.3451 25.3683 24.2921 25.2946 24.2398 25.2204C22.514 22.7704 21.5119 20.0568 21.3332 17.0672C21.2557 15.77 21.2997 14.4659 21.2705 13.1653C21.2596 12.683 21.2298 12.1966 21.1531 11.7209C20.484 7.57005 16.2949 4.7212 12.1686 5.59978C8.56983 6.36606 6.09538 9.40931 6.07931 13.0771C6.07346 14.4082 6.10058 15.7424 6.02158 17.0699C5.84425 20.0487 4.84679 22.7539 3.1324 25.1986C3.06014 25.3016 2.98966 25.4059 2.89881 25.538C10.1022 25.538 17.2552 25.538 24.4388 25.538ZM11.1357 27.3735C11.4329 28.4751 12.683 29.278 13.9055 29.1762C14.9758 29.087 16.1098 28.1982 16.1983 27.3735C14.518 27.3735 12.8385 27.3735 11.1357 27.3735ZM14.5896 3.65146C14.5896 3.37311 14.5905 3.09378 14.589 2.81446C14.5886 2.73422 14.5902 2.65236 14.5759 2.57405C14.4985 2.15095 14.135 1.83465 13.7132 1.8177C13.2906 1.80066 12.8726 2.07878 12.8081 2.50761C12.7514 2.88534 12.7963 3.27833 12.7963 3.65154C13.3938 3.65146 13.9759 3.65146 14.5896 3.65146Z" fill="black"/>
            <path d="M27.3516 12.6625C27.3516 12.7734 27.3537 12.8844 27.3513 12.9953C27.3404 13.5141 26.9609 13.9112 26.4645 13.9247C25.9562 13.9386 25.5773 13.5429 25.524 13.0133C25.4292 12.0734 25.3769 11.1199 25.1723 10.2021C24.7077 8.11876 23.6634 6.32988 22.1815 4.79005C22.0326 4.63537 21.8946 4.44073 21.8317 4.23972C21.7064 3.8389 21.904 3.43202 22.2614 3.23674C22.6251 3.03807 23.0628 3.10111 23.3749 3.41426C24.1483 4.18999 24.825 5.04305 25.3909 5.98008C26.6323 8.03552 27.2733 10.267 27.3516 12.6625Z" fill="black"/>
            <path d="M0.0046786 12.5951C0.140921 9.09706 1.44188 6.01449 3.95164 3.44529C4.34178 3.04592 4.90956 3.01799 5.28126 3.37037C5.65272 3.72243 5.6619 4.29488 5.26884 4.69602C4.09414 5.89509 3.18981 7.26345 2.5932 8.83259C2.11205 10.0981 1.8653 11.4077 1.83031 12.7587C1.8269 12.8896 1.83518 13.0227 1.81504 13.1511C1.74278 13.6119 1.32983 13.9461 0.873121 13.9241C0.401064 13.9014 0.0263572 13.5201 0.00540934 13.0377C0.000294169 12.9168 0.0046786 12.7957 0.0046786 12.5951Z" fill="black"/>
          </svg></a> */}

          
          <div className="dropdown">
          <div className="drop-contanir">
          <img src={user} alt="" />
      <button onClick={toggleDropdown} className="dropbtn">
      <svg xmlns="http://www.w3.org/2000/svg" width="21" height="12" viewBox="0 0 21 12" fill="none">
  <path d="M10.503 0.00281403C13.5848 0.00281403 16.6666 0.00531235 19.7484 3.40853e-06C20.1843 -0.00074609 20.546 0.121984 20.7981 0.491737C21.0807 0.906209 21.0673 1.42705 20.7539 1.8191C20.6131 1.99517 20.4517 2.155 20.2967 2.31945C17.4527 5.33862 14.6076 8.35666 11.7645 11.3766C10.9853 12.2043 10.016 12.2084 9.24106 11.3856C6.301 8.26416 3.36032 5.14331 0.41707 2.02496C0.154619 1.74696 -0.0240173 1.4476 0.0026281 1.04843C0.0396564 0.492549 0.488687 0.037978 1.04711 0.00768577C1.14832 0.00218945 1.24989 0.00293894 1.35128 0.00293894C4.4018 0.00275157 7.45238 0.00281403 10.503 0.00281403Z" fill="#504E4E"/>
</svg>
      </button>
      </div>
      <div id="myDropdown" className={`dropdown-content ${showDropdown ? 'show' : ''}`}>
        {/* <a href="#Saved">Saved Emails</a> */}

  
            <a href="/fave">Favorites</a>
          
            <a href="/save">Following</a>
            
        
        <a  onClick={handleLogout}>Logout</a>
      </div>
    </div>
          
        </div>
      </nav>
    </div>
  </header>
  
  {dialogOpen && <dialog open onClose={handleCloseDialog}>
        <LOGIN />
      </dialog>}
      {dialogOpen1 && <dialog open onClose={handleCloseDialog1}>
        <Singup />
      </dialog>}
        </div>
    );
}
export default Header2;